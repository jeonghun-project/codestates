(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{435:function(s,e,a){s.exports=a.p+"assets/img/module_06_rollingupdates1.3f74dfba.svg"},436:function(s,e,a){s.exports=a.p+"assets/img/module_06_rollingupdates2.62afd5b1.svg"},437:function(s,e,a){s.exports=a.p+"assets/img/module_06_rollingupdates3.dc3754d9.svg"},438:function(s,e,a){s.exports=a.p+"assets/img/module_06_rollingupdates4.05347706.svg"},560:function(s,e,a){"use strict";a.r(e);var t=a(1),n=Object(t.a)({},(function(){var s=this,e=s._self._c;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"rolling-update"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rolling-update"}},[s._v("#")]),s._v(" Rolling update")]),s._v(" "),e("p",[e("strong",[s._v("Rolling update를 통해 Pod instance를 새 instance로 점진적으로 업데이트하여 어플리케이션의 Down 없이 무중단 배포를 할 수 있다.")])]),s._v(" "),e("blockquote",[e("p",[s._v("기본적으로 Rolling Update 중에는 하나의 Pod를 사용할 수 없고 새로 1개의 Pod가 생성된다.")])]),s._v(" "),e("p",[e("img",{attrs:{src:a(435),alt:"Rolling update"}}),s._v(" "),e("img",{attrs:{src:a(436),alt:"Rolling update"}}),s._v(" "),e("img",{attrs:{src:a(437),alt:"Rolling update"}}),s._v(" "),e("img",{attrs:{src:a(438),alt:"Rolling update"}})]),s._v(" "),e("p",[s._v("Scaling과 유사하게 동작하며 배포가 공개적(publicly)으로 노출되면, "),e("strong",[s._v("서비스는 업데이트 중에 사용 가능한 Pod로만 트래픽을 로드 밸런싱한다.")])]),s._v(" "),e("p",[s._v("Rolling Update를 통해 가능한 것")]),s._v(" "),e("ul",[e("li",[s._v("컨테이너 이미지 업데이트를 통해 어블리케이션의 Promote(증진)")]),s._v(" "),e("li",[s._v("이전 버전으로 Rollback")]),s._v(" "),e("li",[s._v("다운타임 없이 애플리케이션의 지속적 통합 및 지속적 전달 (무중단 배포)")])]),s._v(" "),e("ol",[e("li",[s._v("현재 상태부터 확인하자")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get deployments\n\nNAME                  READY   UP-TO-DATE   AVAILABLE   AGE\nkubernetes-bootcamp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/4     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           8s\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\n\nNAME                                  READY   STATUS    RESTARTS   AGE\nkubernetes-bootcamp-fb5c67579-2s5qf   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          105s\nkubernetes-bootcamp-fb5c67579-58hxp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          105s\nkubernetes-bootcamp-fb5c67579-gpj95   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          105s\nkubernetes-bootcamp-fb5c67579-pzwf2   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          105s\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe pods\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nImage:          gcr.io/google-samples/kubernetes-bootcamp:v1\nImage ID:       docker-pullable://jocatalin/kubernetes-bootcamp@sha256:0d6b8ee63bb57c5f5b6156f446b3bc3b3c143d233037f3a2f00e279c8fcc64af\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nImage:          gcr.io/google-samples/kubernetes-bootcamp:v1\nImage ID:       docker-pullable://jocatalin/kubernetes-bootcamp@sha256:0d6b8ee63bb57c5f5b6156f446b3bc3b3c143d233037f3a2f00e279c8fcc64af\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n\n")])])]),e("ol",{attrs:{start:"2"}},[e("li",[s._v("이제 버전을 업데이트 해보자")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" image deployments/kubernetes-bootcamp kubernetes-bootcamp"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("jocatalin/kubernet-bootcamp:v2\n\ndeployment.apps/kubernetes-bootcamp image updated\n")])])]),e("p",[s._v("업데이트와 동시에 Rolling update는 시작되었다.")]),s._v(" "),e("ol",{attrs:{start:"3"}},[e("li",[s._v("새 Pod를 확인하고 이전 Pod를 확인해보자.")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\n\nNAME                                   READY   STATUS        RESTARTS   AGE\nkubernetes-bootcamp-7d44784b7c-7gw8j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          81s\nkubernetes-bootcamp-7d44784b7c-h9gq5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m20s\nkubernetes-bootcamp-7d44784b7c-n5tf6   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m21s\nkubernetes-bootcamp-7d44784b7c-xg5sg   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m22s\nkubernetes-bootcamp-fb5c67579-2s5qf    "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m22s\n")])])]),e("p",[s._v("시간이 흐른 뒤에 다시 명령어를 입력하면")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\n\nNAME                                   READY   STATUS    RESTARTS   AGE\nkubernetes-bootcamp-7d44784b7c-7gw8j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m42s\nkubernetes-bootcamp-7d44784b7c-h9gq5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m35s\nkubernetes-bootcamp-7d44784b7c-n5tf6   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m36s\nkubernetes-bootcamp-7d44784b7c-xg5sg   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          4m43s\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[s._v("Service 에 노출된 PORT를 확인하자")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe services/kubernetes-bootcamp\n\nName:                     kubernetes-bootcamp\nNamespace:                default\nLabels:                   "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kubernetes-bootcamp\nAnnotations:              "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nSelector:                 "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("app")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("kubernetes-bootcamp\nType:                     NodePort\nIP Families:              "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nIP:                       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.104")]),s._v(".210.114\nIPs:                      "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.104")]),s._v(".210.114\nPort:                     "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/TCP\nTargetPort:               "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("/TCP\nNodePort:                 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("unset"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30433")]),s._v("/TCP\nEndpoints:                "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.10:8080,172.18.0.11:8080,172.18.0.12:8080 + "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" more"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nSession Affinity:         None\nExternal Traffic Policy:  Cluster\nEvents:                   "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("none"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])])]),e("ol",{attrs:{start:"5"}},[e("li",[s._v("환경 변수로 포트를 입력하고")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("kubectl get services/kubernetes-bootcamp "),e("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" go-template"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{{(index .spec.ports 0).nodePort}}'")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n$ "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_PORT")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODE_PORT")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("30433")]),s._v("\n")])])]),e("ol",{attrs:{start:"6"}},[e("li",[s._v("curl을 통해서 버전을 확인해보면")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token variable"}},[e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("minikube "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ip")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),e("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$NODE_PORT")]),s._v("\nHello Kubernetes bootcamp"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" Running on: kubernetes-bootcamp-7d44784b7c-n5tf6 "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("v")]),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n")])])]),e("ol",{attrs:{start:"7"}},[e("li",[e("code",[s._v("rollout status")]),s._v("를 통해서 rolling update 상태도 확인 할 수 있다.")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl rollout status deployments/kubernetes-bootcamp\ndeployment "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"kubernetes-bootcamp"')]),s._v(" successfully rolled out\n")])])]),e("p",[s._v("이제 Pod를 describe 해보면 image가 변한 것을 알 수 있다.")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe pods\n\nImage:          jocatalin/kubernetes-bootcamp:v2\n")])])]),e("h2",{attrs:{id:"이제-rollback을-살펴보자"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#이제-rollback을-살펴보자"}},[s._v("#")]),s._v(" 이제 Rollback을 살펴보자")]),s._v(" "),e("p",[s._v("V10 태그 이미지를 배포하고 다시 돌아와보도록하자")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("set")]),s._v(" image deployments/kubernetes-bootcamp kubernetes-bootcamp"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcr.io/google-samples/kubernetes-bootcamp:v10\ntes-bootcamp"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcr.io/google-samples/kubernetes-bootcamp:v10et\ndeployment.apps/kubernetes-bootcamp image updated\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get deployments\nNAME                  READY   UP-TO-DATE   AVAILABLE   AGE\nkubernetes-bootcamp   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("/4     "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("           16m\n")])])]),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\nNAME                                   READY   STATUS             RESTARTS   AGE\nkubernetes-bootcamp-59b7598c77-hw9ks   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     ImagePullBackOff   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          57s\nkubernetes-bootcamp-59b7598c77-k87wm   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     ImagePullBackOff   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          58s\nkubernetes-bootcamp-7d44784b7c-7gw8j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          11m\nkubernetes-bootcamp-7d44784b7c-h9gq5   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          11m\nkubernetes-bootcamp-7d44784b7c-n5tf6   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          11m\nkubernetes-bootcamp-7d44784b7c-xg5sg   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running            "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          11m\n")])])]),e("p",[e("code",[s._v("ImagePullBackOff")]),s._v("가 발생한 것을 알 수 있습니다.")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl describe pods\n\nEvents:\n  Type     Reason     Age                  From               Message\n  ----     ------     ----                 ----               -------\n  Normal   Scheduled  2m42s                default-scheduler  Successfully assigned default/kubernetes-bootcamp-59b7598c77-k87wm to minikube\n  Normal   BackOff    76s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x6 over 2m36s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet            Back-off pulling image "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/google-samples/kubernetes-bootcamp:v10"')]),s._v("\n  Normal   Pulling    65s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 2m38s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet            Pulling image "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/google-samples/kubernetes-bootcamp:v10"')]),s._v("\n  Warning  Failed     64s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 2m37s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet            Failed to pull image "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"gcr.io/google-samples/kubernetes-bootcamp:v10"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" rpc error: code "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Unknown desc "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" Error response from daemon: manifest "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" gcr.io/google-samples/kubernetes-bootcamp:v10 not found: manifest unknown: Failed to fetch "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"v10"')]),s._v(" from request "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/v2/google-samples/kubernetes-bootcamp/manifests/v10"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n  Warning  Failed     64s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x4 over 2m37s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet            Error: ErrImagePull\n  Warning  Failed     50s "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("x7 over 2m36s"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  kubelet            Error: ImagePullBackOff\n\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nEvents:\n  Type    Reason     Age   From               Message\n  ----    ------     ----  ----               -------\n  Normal  Scheduled  13m   default-scheduler  Successfully assigned default/kubernetes-bootcamp-7d44784b7c-7gw8j to minikube\n  Normal  Pulled     13m   kubelet            Container image "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"jocatalin/kubernetes-bootcamp:v2"')]),s._v(" already present on machine\n  Normal  Created    13m   kubelet            Created container kubernetes-bootcamp\n  Normal  Started    13m   kubelet            Started container kubernetes-bootcamp\n")])])]),e("p",[s._v("이럴 경우 롤백을 시행 할 수 있다.")]),s._v(" "),e("p",[e("code",[s._v("rollout undo")])]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl rollout undo deployments/kubernetes-bootcamp\ndeployment.apps/kubernetes-bootcamp rolled back\n")])])]),e("p",[s._v("이제 Pod 상태를 살펴보자")]),s._v(" "),e("div",{staticClass:"language-bash extra-class"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ kubectl get pods\nNAME                                   READY   STATUS        RESTARTS   AGE\nkubernetes-bootcamp-59b7598c77-hw9ks   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m23s\nkubernetes-bootcamp-59b7598c77-k87wm   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("/1     Terminating   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          6m24s\nkubernetes-bootcamp-7d44784b7c-7gw8j   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          16m\nkubernetes-bootcamp-7d44784b7c-b484r   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          14s\nkubernetes-bootcamp-7d44784b7c-n5tf6   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          16m\nkubernetes-bootcamp-7d44784b7c-xg5sg   "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("/1     Running       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          16m\n")])])]),e("p",[s._v("이제 전체 Pods는 안정적인 V2 버전의 image를 사용하도록 되었다.")])])}),[],!1,null,null,null);e.default=n.exports}}]);