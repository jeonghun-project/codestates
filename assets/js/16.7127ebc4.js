(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{451:function(t,a,s){t.exports=s.p+"assets/img/publickey.21d87b24.png"},452:function(t,a,s){t.exports=s.p+"assets/img/accountinfo.cae1a3aa.png"},453:function(t,a,s){t.exports=s.p+"assets/img/wallet.28ed0d09.png"},454:function(t,a,s){t.exports=s.p+"assets/img/programaccount.1a2153cb.png"},455:function(t,a,s){t.exports=s.p+"assets/img/simpleprogramaccount.91428e1c.png"},456:function(t,a,s){t.exports=s.p+"assets/img/dataaccount.2a5ba3ad.png"},604:function(t,a,s){"use strict";s.r(a);var n=s(1),r=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"solana"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#solana"}},[t._v("#")]),t._v(" Solana")]),t._v(" "),a("p",[t._v("SOL solana는 현대 가장 빠른 on-Chain Program 중의 하나이다.")]),t._v(" "),a("p",[t._v("이에 대한 스터디를 진행하면서 남기는 기록으로 다른이들에게 도움이 되었으면 좋겠다.")]),t._v(" "),a("h2",{attrs:{id:"account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#account"}},[t._v("#")]),t._v(" Account")]),t._v(" "),a("p",[t._v("솔라나는 Account 라는 Key value와 같은 구조의 데이터 저장소의 모임으로 구성된다")]),t._v(" "),a("p",[t._v("모든 Account는 Owner를 가지고 있고 이 Owner만이 Account에 "),a("strong",[t._v("데이터를 수정하거나 lamport 잔액을 공제")]),t._v("할 수 있다.")]),t._v(" "),a("p",[a("strong",[t._v("하지만 누구나 잔액을 늘리는 것은 가능하다")])]),t._v(" "),a("p",[t._v("여기서 Key 값은 솔라나의 PublicKey 이다")]),t._v(" "),a("ul",[a("li",[t._v("PublicKey는 Ed25519 형식의 32바이트로 표시된다")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(451),alt:"Public_Key"}})]),t._v(" "),a("ul",[a("li",[t._v("Account의 최대 크기는 10MB 이다")])]),t._v(" "),a("p",[a("img",{attrs:{src:s(452),alt:"account_info"}})]),t._v(" "),a("p",[t._v("아래는 rust anchor에 정의된 AccountInfo이다.")]),t._v(" "),a("div",{staticClass:"language-rust extra-class"},[a("pre",{pre:!0,attrs:{class:"language-rust"}},[a("code",[a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[derive(Clone)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token attribute attr-name"}},[t._v("#[repr(C)]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("struct")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token type-definition class-name"}},[t._v("AccountInfo")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[t._v("'a")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// Public key of the account")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[t._v("'a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pubkey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// The lamports in the account.  Modifiable by programs.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// SOL의 가장 작은 단위인 램프(1 SOL = 10억 램프)로 계정 잔액을 숫자로 표현한 것입니다.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 0.000000001 sol 값을 갖는 분수 네이티브 토큰.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" lamports"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RefCell")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[t._v("'a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("u64")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// The data held in this account.  Modifiable by programs.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 계정의 상태를 저장하는 바이트 배열 계정이 프로그램(계약)인 경우 실행가능한 프로그랜 코드를 저장한다.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 이 필드를 종종 Account data 라고 한다.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Rc")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RefCell")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[t._v("'a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("mut")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("u8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// Program that owns this account")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 계정을 소유한 프로그램의 공개 키(프로그램 ID)를 지정합니다.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" owner"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),a("span",{pre:!0,attrs:{class:"token lifetime-annotation symbol"}},[t._v("'a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Pubkey")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// The epoch at which this account will next owe rent")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" rent_epoch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Epoch")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// Was the transaction signed by this account's public key?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" is_signer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// Is the account writable?")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" is_writable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// This account's data contains a loaded program (and is now read-only)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/// 계정이 프로그램인지 여부를 나타내는 부울 플래그입니다.")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("pub")]),t._v(" executable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("bool")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"native-programs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#native-programs"}},[t._v("#")]),t._v(" Native Programs")]),t._v(" "),a("p",[t._v("솔라나의 노드중에 일부 필요한 기능을 구현하여 동작하는 Account Program들이 있다.")]),t._v(" "),a("p",[t._v("솔라나에서 맞춤형 프로그램을 개발할 때 일반적으로 "),a("strong",[t._v("시스템 프로그램")]),t._v("과 "),a("strong",[t._v("BPF 로더")]),t._v("라는 두 가지 기본 프로그램과 상호 작용하게 됩니다.")]),t._v(" "),a("h3",{attrs:{id:"system-program"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#system-program"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://solana.com/ko/docs/core/accounts#system-program",target:"_blank",rel:"noopener noreferrer"}},[t._v("System Program"),a("OutboundLink")],1)]),t._v(" "),a("blockquote",[a("p",[t._v("By default, all new accounts are owned by the System Program")])]),t._v(" "),a("p",[t._v("System Program의 역할")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("신규 계정 생성: 시스템 프로그램만이 신규 계정을 생성할 수 있습니다.")])]),t._v(" "),a("li",[a("p",[t._v("공간 할당: 각 계정의 데이터 필드에 대한 바이트 용량을 설정합니다.")])]),t._v(" "),a("li",[a("p",[t._v("프로그램 소유권 할당: 시스템 프로그램이 계정을 생성하면 지정된 프로그램 소유자를 다른 프로그램 계정에 재할당할 수 있습니다. 이는 Custom Program이 시스템 프로그램에서 생성한 새 계정의 소유권을 가져오는 방법입니다.")])])]),t._v(" "),a("p",[t._v("여기서 우리는 알 수 있다 Wallet은 Owner가 System Program이고 not Excutable인 형태면서 Lamports를 보유하고 있는 계정이 월렛인 것이다.")]),t._v(" "),a("p",[t._v("그림으로 보면 다음과 같다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(453),alt:"Wallet"}})]),t._v(" "),a("h3",{attrs:{id:"bpfloader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#bpfloader"}},[t._v("#")]),t._v(" "),a("a",{attrs:{href:"https://solana.com/ko/docs/core/accounts#bpfloader-program",target:"_blank",rel:"noopener noreferrer"}},[t._v("BPFLoader"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v('BPF 로더는 네이티브 프로그램을 제외한 네트워크의 다른 모든 프로그램의 "소유자"로 지정된 프로그램입니다. 사용자 정의 프로그램의 배포, 업그레이드 및 실행을 담당합니다.')]),t._v(" "),a("p",[t._v("더 다양한 Native Program들이 있으니 참고하자")]),t._v(" "),a("h2",{attrs:{id:"custom-program"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#custom-program"}},[t._v("#")]),t._v(" Custom Program")]),t._v(" "),a("p",[t._v('솔라나에서는 “스마트 계약”을 프로그램이라고 부릅니다. 프로그램은 실행 가능한 코드를 포함하고 true로 설정된 "실행 가능" 플래그로 표시되는 계정입니다.')]),t._v(" "),a("h3",{attrs:{id:"program-account"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#program-account"}},[t._v("#")]),t._v(" Program Account")]),t._v(" "),a("p",[t._v("새로운 프로그램이 솔라나에 배포되면 기술적으로 세 개의 별도 계정이 생성된다")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("Program Account")]),t._v(": 온체인 프로그램을 대표하는 주 계정입니다. 이 계정은 실행 가능한 데이터 계정(컴파일된 프로그램 코드를 저장하는)의 주소와 프로그램에 대한 업데이트 권한(프로그램을 변경할 수 있는 주소)을 저장합니다.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Program Executable Data Account")]),t._v(": 프로그램 실행 가능 데이터 계정: 프로그램의 실행 가능 바이트 코드가 포함된 계정입니다.")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("Buffer Account")]),t._v(": 프로그램이 적극적으로 배포되거나 업그레이드되는 동안 바이트 코드를 저장하는 임시 계정입니다. 프로세스가 완료되면 데이터가 프로그램 실행 가능 데이터 계정으로 전송되고 버퍼 계정이 닫힙니다.")])])]),t._v(" "),a("p",[a("img",{attrs:{src:s(454),alt:"ProgramAccountFull"}})]),t._v(" "),a("p",[t._v('이를 단순히 추상화 하여 "프로그램 계정"을 프로그램 자체로 생각하면 됩니다.')]),t._v(" "),a("p",[a("img",{attrs:{src:s(455),alt:"ProgramAccountSimple"}})]),t._v(" "),a("h3",{attrs:{id:"data-account-pda"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#data-account-pda"}},[t._v("#")]),t._v(" Data Account(PDA)")]),t._v(" "),a("blockquote",[a("p",[t._v('솔라나 프로그램은 "상태 비저장('),a("code",[t._v("stateless")]),t._v(')"입니다. 즉, 프로그램 계정에는 프로그램의 실행 가능한 바이트 코드만 포함되어 있다는 의미입니다. 추가 데이터를 저장하고 수정하려면 새 계정을 만들어야 합니다. 이러한 계정을 일반적으로 "데이터 계정('),a("code",[t._v("data accounts")]),t._v(')"이라고 합니다.')])]),t._v(" "),a("p",[t._v("데이터 계정은 소유자 프로그램의 코드에 정의된 대로 임의의 데이터를 저장할 수 있습니다.")]),t._v(" "),a("p",[a("img",{attrs:{src:s(456),alt:"DataAccount"}})]),t._v(" "),a("p",[t._v("creating a data account for a custom program requires two steps:")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("시스템 프로그램을 호출하여 계정을 만든 다음 소유권을 사용자 정의 프로그램으로 이전합니다. => 시스템 프로그램만이 Account를 만들 수 있어서")])]),t._v(" "),a("li",[a("p",[t._v("이제 계정을 소유한 Custom Program을 호출하여 프로그램 코드에 정의된 대로 계정 데이터를 초기화합니다.")])])]),t._v(" "),a("p",[t._v("이를 총체적으로 이해할 필요는 없지만(이제는 추상화 되어서) 이해하고 있는것이 도움된다.")])])}),[],!1,null,null,null);a.default=r.exports}}]);