<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>node.js mySQL | Hoon&#39;s devlog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Hoon&#39;s devlog">
    
    <link rel="preload" href="/Learning-things/assets/css/0.styles.236cbcfe.css" as="style"><link rel="preload" href="/Learning-things/assets/js/app.34845478.js" as="script"><link rel="preload" href="/Learning-things/assets/js/15.fe10506d.js" as="script"><link rel="prefetch" href="/Learning-things/assets/js/1.81a9563b.js"><link rel="prefetch" href="/Learning-things/assets/js/10.2f0b4ec8.js"><link rel="prefetch" href="/Learning-things/assets/js/100.19e7d0ad.js"><link rel="prefetch" href="/Learning-things/assets/js/101.4bfe11b1.js"><link rel="prefetch" href="/Learning-things/assets/js/102.d6037199.js"><link rel="prefetch" href="/Learning-things/assets/js/103.8c064dd1.js"><link rel="prefetch" href="/Learning-things/assets/js/104.4a0c043a.js"><link rel="prefetch" href="/Learning-things/assets/js/105.29f25cf4.js"><link rel="prefetch" href="/Learning-things/assets/js/106.1f8f351a.js"><link rel="prefetch" href="/Learning-things/assets/js/107.d14c48f4.js"><link rel="prefetch" href="/Learning-things/assets/js/108.ae07fffe.js"><link rel="prefetch" href="/Learning-things/assets/js/109.0c02eaea.js"><link rel="prefetch" href="/Learning-things/assets/js/11.28c59ef8.js"><link rel="prefetch" href="/Learning-things/assets/js/110.49ce71a8.js"><link rel="prefetch" href="/Learning-things/assets/js/111.c3916fe3.js"><link rel="prefetch" href="/Learning-things/assets/js/112.ace32b7a.js"><link rel="prefetch" href="/Learning-things/assets/js/113.eaf6b1ce.js"><link rel="prefetch" href="/Learning-things/assets/js/114.9b57481d.js"><link rel="prefetch" href="/Learning-things/assets/js/115.1cc1f335.js"><link rel="prefetch" href="/Learning-things/assets/js/116.c1eef25e.js"><link rel="prefetch" href="/Learning-things/assets/js/117.eb88c2a7.js"><link rel="prefetch" href="/Learning-things/assets/js/118.04d16478.js"><link rel="prefetch" href="/Learning-things/assets/js/119.3a971c62.js"><link rel="prefetch" href="/Learning-things/assets/js/12.7f1cb66e.js"><link rel="prefetch" href="/Learning-things/assets/js/120.626e4865.js"><link rel="prefetch" href="/Learning-things/assets/js/121.6c98a6fe.js"><link rel="prefetch" href="/Learning-things/assets/js/122.fa96ee2f.js"><link rel="prefetch" href="/Learning-things/assets/js/123.3106a0dc.js"><link rel="prefetch" href="/Learning-things/assets/js/124.c3d5c72b.js"><link rel="prefetch" href="/Learning-things/assets/js/125.d7e5bba4.js"><link rel="prefetch" href="/Learning-things/assets/js/126.fda93fe1.js"><link rel="prefetch" href="/Learning-things/assets/js/127.6c0cdd28.js"><link rel="prefetch" href="/Learning-things/assets/js/128.5529abc5.js"><link rel="prefetch" href="/Learning-things/assets/js/129.293ed39d.js"><link rel="prefetch" href="/Learning-things/assets/js/13.27789fa9.js"><link rel="prefetch" href="/Learning-things/assets/js/130.c9998d76.js"><link rel="prefetch" href="/Learning-things/assets/js/131.8ccfe623.js"><link rel="prefetch" href="/Learning-things/assets/js/132.53601114.js"><link rel="prefetch" href="/Learning-things/assets/js/133.47cc4dc5.js"><link rel="prefetch" href="/Learning-things/assets/js/134.99df1fa2.js"><link rel="prefetch" href="/Learning-things/assets/js/135.768f7f60.js"><link rel="prefetch" href="/Learning-things/assets/js/136.3fed8d17.js"><link rel="prefetch" href="/Learning-things/assets/js/137.da1ccbcf.js"><link rel="prefetch" href="/Learning-things/assets/js/138.07d2fe36.js"><link rel="prefetch" href="/Learning-things/assets/js/139.fee40614.js"><link rel="prefetch" href="/Learning-things/assets/js/14.b007362d.js"><link rel="prefetch" href="/Learning-things/assets/js/140.5888bd6b.js"><link rel="prefetch" href="/Learning-things/assets/js/141.4f58e0ac.js"><link rel="prefetch" href="/Learning-things/assets/js/142.5196c142.js"><link rel="prefetch" href="/Learning-things/assets/js/143.37eb9f12.js"><link rel="prefetch" href="/Learning-things/assets/js/144.5686e819.js"><link rel="prefetch" href="/Learning-things/assets/js/145.e6398a0b.js"><link rel="prefetch" href="/Learning-things/assets/js/146.d4ce4f62.js"><link rel="prefetch" href="/Learning-things/assets/js/147.7e20301d.js"><link rel="prefetch" href="/Learning-things/assets/js/148.7fa1f57e.js"><link rel="prefetch" href="/Learning-things/assets/js/149.3cd4b6a6.js"><link rel="prefetch" href="/Learning-things/assets/js/150.6c5794b1.js"><link rel="prefetch" href="/Learning-things/assets/js/151.de0387c2.js"><link rel="prefetch" href="/Learning-things/assets/js/152.155e476a.js"><link rel="prefetch" href="/Learning-things/assets/js/153.5060cdc2.js"><link rel="prefetch" href="/Learning-things/assets/js/154.24574163.js"><link rel="prefetch" href="/Learning-things/assets/js/16.7127ebc4.js"><link rel="prefetch" href="/Learning-things/assets/js/17.c28ad3e4.js"><link rel="prefetch" href="/Learning-things/assets/js/18.491f7bbc.js"><link rel="prefetch" href="/Learning-things/assets/js/19.f5e91ccc.js"><link rel="prefetch" href="/Learning-things/assets/js/2.10f0fb42.js"><link rel="prefetch" href="/Learning-things/assets/js/20.d31645da.js"><link rel="prefetch" href="/Learning-things/assets/js/21.e63925ee.js"><link rel="prefetch" href="/Learning-things/assets/js/22.0880b7c4.js"><link rel="prefetch" href="/Learning-things/assets/js/23.ce523771.js"><link rel="prefetch" href="/Learning-things/assets/js/24.3e1f9f45.js"><link rel="prefetch" href="/Learning-things/assets/js/25.2e30cbc5.js"><link rel="prefetch" href="/Learning-things/assets/js/26.ffd3468a.js"><link rel="prefetch" href="/Learning-things/assets/js/27.a08de2e6.js"><link rel="prefetch" href="/Learning-things/assets/js/28.43cb9008.js"><link rel="prefetch" href="/Learning-things/assets/js/29.97f224b4.js"><link rel="prefetch" href="/Learning-things/assets/js/3.cd241d2e.js"><link rel="prefetch" href="/Learning-things/assets/js/30.4aeea63a.js"><link rel="prefetch" href="/Learning-things/assets/js/31.dcdb98ad.js"><link rel="prefetch" href="/Learning-things/assets/js/32.95b9ea13.js"><link rel="prefetch" href="/Learning-things/assets/js/33.0f45410e.js"><link rel="prefetch" href="/Learning-things/assets/js/34.4122d9a9.js"><link rel="prefetch" href="/Learning-things/assets/js/35.e1b83542.js"><link rel="prefetch" href="/Learning-things/assets/js/36.cdade17f.js"><link rel="prefetch" href="/Learning-things/assets/js/37.4998074e.js"><link rel="prefetch" href="/Learning-things/assets/js/38.e9c6f52f.js"><link rel="prefetch" href="/Learning-things/assets/js/39.86090930.js"><link rel="prefetch" href="/Learning-things/assets/js/4.5897134d.js"><link rel="prefetch" href="/Learning-things/assets/js/40.1a4c69aa.js"><link rel="prefetch" href="/Learning-things/assets/js/41.a1763204.js"><link rel="prefetch" href="/Learning-things/assets/js/42.0f0b5f67.js"><link rel="prefetch" href="/Learning-things/assets/js/43.21c3250f.js"><link rel="prefetch" href="/Learning-things/assets/js/44.30a2d40d.js"><link rel="prefetch" href="/Learning-things/assets/js/45.cb183cf1.js"><link rel="prefetch" href="/Learning-things/assets/js/46.8986dc86.js"><link rel="prefetch" href="/Learning-things/assets/js/47.174b2828.js"><link rel="prefetch" href="/Learning-things/assets/js/48.078c7290.js"><link rel="prefetch" href="/Learning-things/assets/js/49.97cf20be.js"><link rel="prefetch" href="/Learning-things/assets/js/50.8f3059e6.js"><link rel="prefetch" href="/Learning-things/assets/js/51.afa94752.js"><link rel="prefetch" href="/Learning-things/assets/js/52.94d9efc6.js"><link rel="prefetch" href="/Learning-things/assets/js/53.acf2e7e9.js"><link rel="prefetch" href="/Learning-things/assets/js/54.d48c5020.js"><link rel="prefetch" href="/Learning-things/assets/js/55.1e25500b.js"><link rel="prefetch" href="/Learning-things/assets/js/56.c02cfc58.js"><link rel="prefetch" href="/Learning-things/assets/js/57.56443033.js"><link rel="prefetch" href="/Learning-things/assets/js/58.f8ee102f.js"><link rel="prefetch" href="/Learning-things/assets/js/59.0dee9453.js"><link rel="prefetch" href="/Learning-things/assets/js/60.301a3117.js"><link rel="prefetch" href="/Learning-things/assets/js/61.89f9cb85.js"><link rel="prefetch" href="/Learning-things/assets/js/62.257d0542.js"><link rel="prefetch" href="/Learning-things/assets/js/63.d3a035eb.js"><link rel="prefetch" href="/Learning-things/assets/js/64.c16b6938.js"><link rel="prefetch" href="/Learning-things/assets/js/65.d23c869d.js"><link rel="prefetch" href="/Learning-things/assets/js/66.f2c7cf0f.js"><link rel="prefetch" href="/Learning-things/assets/js/67.bf6e3f30.js"><link rel="prefetch" href="/Learning-things/assets/js/68.58c56b48.js"><link rel="prefetch" href="/Learning-things/assets/js/69.4ea2ae9c.js"><link rel="prefetch" href="/Learning-things/assets/js/7.6b765647.js"><link rel="prefetch" href="/Learning-things/assets/js/70.e4b7221d.js"><link rel="prefetch" href="/Learning-things/assets/js/71.368d71cd.js"><link rel="prefetch" href="/Learning-things/assets/js/72.09765ffc.js"><link rel="prefetch" href="/Learning-things/assets/js/73.03675c78.js"><link rel="prefetch" href="/Learning-things/assets/js/74.81f38d87.js"><link rel="prefetch" href="/Learning-things/assets/js/75.2811d211.js"><link rel="prefetch" href="/Learning-things/assets/js/76.494457b7.js"><link rel="prefetch" href="/Learning-things/assets/js/77.e0096b6a.js"><link rel="prefetch" href="/Learning-things/assets/js/78.55aac35d.js"><link rel="prefetch" href="/Learning-things/assets/js/79.e0c0a212.js"><link rel="prefetch" href="/Learning-things/assets/js/8.3c4e6266.js"><link rel="prefetch" href="/Learning-things/assets/js/80.12ca3596.js"><link rel="prefetch" href="/Learning-things/assets/js/81.43f2cdf9.js"><link rel="prefetch" href="/Learning-things/assets/js/82.46f71bb0.js"><link rel="prefetch" href="/Learning-things/assets/js/83.fa23893b.js"><link rel="prefetch" href="/Learning-things/assets/js/84.4fa35dfa.js"><link rel="prefetch" href="/Learning-things/assets/js/85.b66bd7a7.js"><link rel="prefetch" href="/Learning-things/assets/js/86.28fd5c1a.js"><link rel="prefetch" href="/Learning-things/assets/js/87.3a110fd7.js"><link rel="prefetch" href="/Learning-things/assets/js/88.d2d6678f.js"><link rel="prefetch" href="/Learning-things/assets/js/89.e8675582.js"><link rel="prefetch" href="/Learning-things/assets/js/9.35333d15.js"><link rel="prefetch" href="/Learning-things/assets/js/90.0f462e11.js"><link rel="prefetch" href="/Learning-things/assets/js/91.2cf64d99.js"><link rel="prefetch" href="/Learning-things/assets/js/92.ed75cac1.js"><link rel="prefetch" href="/Learning-things/assets/js/93.4ec67d78.js"><link rel="prefetch" href="/Learning-things/assets/js/94.6e8fdfd4.js"><link rel="prefetch" href="/Learning-things/assets/js/95.991763b3.js"><link rel="prefetch" href="/Learning-things/assets/js/96.e0671be2.js"><link rel="prefetch" href="/Learning-things/assets/js/97.d48cd240.js"><link rel="prefetch" href="/Learning-things/assets/js/98.1c560548.js"><link rel="prefetch" href="/Learning-things/assets/js/99.2d318df1.js"><link rel="prefetch" href="/Learning-things/assets/js/vendors~docsearch.c7b4e164.js">
    <link rel="stylesheet" href="/Learning-things/assets/css/0.styles.236cbcfe.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Learning-things/" class="home-link router-link-active"><img src="logo_hoon's_full.png" alt="Hoon's devlog" class="logo"> <span class="site-name can-hide">Hoon's devlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/jeonghun-project/Learning-things" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/jeonghun-project/Learning-things" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AIboostclass</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>AWS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>DATABASE</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ERC20</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ErrorCase</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>MQ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ShellScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>TIL</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>algorism</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>docker</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>go</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>graphql</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>javascript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>kubernetes</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>nest</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>network</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>node.js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Learning-things/node.js/EventEmitter.html" class="sidebar-link">Event Emitter</a></li><li><a href="/Learning-things/node.js/Sequelize.html" class="sidebar-link">Sequelize</a></li><li><a href="/Learning-things/node.js/Server.html" class="sidebar-link">Node js 내장 서버</a></li><li><a href="/Learning-things/node.js/Stream.html" class="sidebar-link">Stream</a></li><li><a href="/Learning-things/node.js/axios.html" class="sidebar-link">axios</a></li><li><a href="/Learning-things/node.js/express-cors.html" class="sidebar-link">express-cors</a></li><li><a href="/Learning-things/node.js/express-session.html" class="sidebar-link">session 이용하기(with exrpess-session)</a></li><li><a href="/Learning-things/node.js/expressJS.html" class="sidebar-link">Express</a></li><li><a href="/Learning-things/node.js/mysql.html" aria-current="page" class="active sidebar-link">node.js mySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Learning-things/node.js/mysql.html#하나씩-사용해보자" class="sidebar-link">하나씩 사용해보자</a></li></ul></li><li><a href="/Learning-things/node.js/npm.html" class="sidebar-link">npm</a></li><li><a href="/Learning-things/node.js/typeorm.html" class="sidebar-link">type ORM 프로젝트 적용</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>output</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>php</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>project</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>react</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>shopify</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>solana</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>swagger</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>vue.js</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="node-js-mysql"><a href="#node-js-mysql" class="header-anchor">#</a> node.js mySQL</h1> <p>node.js 환경에서도 mysql에 접근하여 직접 쿼리를 보내거나 데이터베이스를 다룰 수 있도록 도와주는 모듈을 지원한다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> con <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;yourusername&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> <span class="token string">&quot;yourpassword&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&quot;mydb&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// query문을 변수에 담아서 보낼 수 있다.</span>
  <span class="token keyword">let</span> sql <span class="token operator">=</span>
    <span class="token string">&quot;INSERT INTO customers (name, address) VALUES ('Company Inc', 'Highway 37')&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// query요청을 보내는 api는 query()이다.</span>
  <span class="token comment">// query(sql, callback(err, result, fields)) 으로 만들자.</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>커넥션 종료히기</p> <div class="language-js extra-class"><pre class="language-js"><code>connection<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// The connection is terminated now</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>연결된 소켓을 파괴한다.</p> <div class="language-js extra-class"><pre class="language-js"><code>connection<span class="token punctuation">.</span><span class="token function">destroy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="하나씩-사용해보자"><a href="#하나씩-사용해보자" class="header-anchor">#</a> 하나씩 사용해보자</h2> <p>초기 DB 상태</p> <p><img src="data:image/png;base64,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" alt="DB"> <img src="data:image/png;base64,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" alt="name"></p> <p>posts는 비어 있는 상태이다.</p> <p>코드를 작성해 보자</p> <ol><li>일단 mysql에 연결을 하자.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mysql <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;mysql&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> dotenv <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;dotenv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dotenv<span class="token punctuation">.</span><span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> con <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">host</span><span class="token operator">:</span> <span class="token string">&quot;localhost&quot;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">&quot;root&quot;</span><span class="token punctuation">,</span>
  <span class="token comment">// dotenv를 통해서 .env에 password를 저장해두고 사용하였다.</span>
  <span class="token literal-property property">password</span><span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">DATABASE_PASSWORD</span><span class="token punctuation">,</span>
  <span class="token literal-property property">database</span><span class="token operator">:</span> <span class="token string">&quot;temp&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이미 만들어져 테이블을 포함하여 데이터베이스의 스키마를 조금 구조화 해보자</p> <p><img src="/Learning-things/assets/img/schema.61e7c7dc.png" alt="schema"></p> <blockquote><p>user -&gt; post -&gt; comment</p></blockquote> <p>comment에 user를 태그할 수 있는 정도 서비스를 만든다고 가정하였다.</p> <ol start="2"><li>부족한 테이블을 만들고 FOREIGN KEY를 연결해보자.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// CREATE TABLE을 이용하자.</span>
  <span class="token keyword">let</span> sql <span class="token operator">=</span>
    <span class="token string">&quot;CREATE TABLE posts (id int PRIMARY AUTO_INCREMENT KEY NOT NULL, content varchar(255) NOT NULL, userId int NOT NULL)&quot;</span><span class="token punctuation">;</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/Learning-things/assets/img/posts_init.1bb3faa1.png" alt="posts"></p> <p>다른 테이블은 같은 방식으로 만들어 두었다.</p> <ol start="3"><li>이제 <code>FOREIGN KEY</code>를 등록해보자</li></ol> <div class="language-js extra-class"><pre class="language-js"><code>con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// query문을 변수에 담아서 보낼 수 있다.</span>
  <span class="token comment">// CREATE TABLE을 이용하자.</span>
  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">ALTER TABLE posts ADD FOREIGN KEY (userId) REFERENCES user (id)</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>사실 이 작업은 mysql을 설치했다면.</p> <p>sql 확장자 파일을 만들어서 <code>mysql -u root -p &lt; schema.sql -D &lt;target DB&gt;</code> 커멘드를 이용하면 쉽게 할수 있다.</p> <p>흠 그렇다면 왜 mysql module을 쓰는 것일까?</p> <p>아마 일반적인 RDBMS에서 지원하는 쿼리를 보낸는 기능외에 자바스크립트의 로직을 활용한 기능을 사용할 수 있어서 인 듯하다.</p> <p>대표적인 편의성 제공 기능인 데이터를 한번에 밀어 넣어 보자.</p> <div class="language-js extra-class"><pre class="language-js"><code>con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// query문을 변수에 담아서 보낼 수 있다.</span>
  <span class="token keyword">let</span> sql <span class="token operator">=</span> <span class="token string">&quot;INSERT INTO user (name) VALUES ?&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// ? 에 들어갈 데이터를 배열에 담아서 쏙 넣어주자</span>
  <span class="token keyword">let</span> user <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">&quot;dea&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">han</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">min</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;kook&quot;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">// query요청을 보내는 api는 query()이다.</span>
  <span class="token comment">// query(sql, callback(err, result, fields)) 으로 만들자.</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql<span class="token punctuation">,</span> <span class="token punctuation">[</span>user<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/Learning-things/assets/img/user.17139937.png" alt="user"></p> <p>이와 같이 데이터를 순서대로 삽입해주는 기능을 가지고 있는데 공식 문서를 참고해서 사용하면 다양한 기능이 있는 것을 알수 있다.</p> <p>요로코롬 2 번째 인자로 넣어 줬을때 자동으로 변환된단다.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 배열에 넣은 값은 자동으로 분해되어 순서에 맞게 query문에 삽입됨</span>
<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span>
<span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'c'</span><span class="token punctuation">,</span> <span class="token string">'d'</span><span class="token punctuation">)</span>
<span class="token comment">// 날짜 데이터도 변환해줌</span>
<span class="token string">'YYYY-mm-dd HH:ii:ss'</span>
<span class="token comment">// sql string으로 변환해줌</span>
<span class="token punctuation">.</span><span class="token function">toSqlString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>그러니까 이런게 가능하다는 것이다</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// object key = 'val' 는 그에 맞게 삽입 된다.</span>
<span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&quot;Hello MySQL&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> query <span class="token operator">=</span> connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO posts SET ?&quot;</span><span class="token punctuation">,</span> post<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span>
  <span class="token parameter">error<span class="token punctuation">,</span>
  results<span class="token punctuation">,</span>
  fields</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token comment">// Neat!</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이것도 직접 해보겠다.</p> <div class="language-js extra-class"><pre class="language-js"><code>con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// 만들어둔 posts table column에 마</span>
  <span class="token keyword">const</span> post <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&quot;Hello MySQL&quot;</span><span class="token punctuation">,</span> <span class="token literal-property property">userId</span><span class="token operator">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token comment">// query요청을 보내는 api는 query()이다.</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO posts SET ?&quot;</span><span class="token punctuation">,</span> post<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> results<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>또 하나의 유용하게 써먹을 기능을 알아보자면</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> con <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 멀티라인을 true 로 만들어 주자.</span>
  <span class="token literal-property property">multipleStatements</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

connection<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span><span class="token string">&quot;SELECT 1; SELECT 2&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> results<span class="token punctuation">,</span> fields</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
  <span class="token comment">// `results` is an array with one element for every statement in the query:</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{1: 1}]</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [{2: 2}]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>이런게 된단다. 호옹 두 가지의 쿼리문을 동시에 실행해서 결과를 배열로 받을수도 있다</p> <p>한 번 해보자</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> con <span class="token operator">=</span> mysql<span class="token punctuation">.</span><span class="token function">createConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token comment">// 멀티라인을 true 로 만들어 주자.</span>
  <span class="token literal-property property">multipleStatements</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

con<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;Connected!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">// query문을 변수에 담아서 보낼 수 있다.</span>
  <span class="token keyword">let</span> sql1 <span class="token operator">=</span> <span class="token string">&quot;SELECT * FROM user; SELECT * FROM posts&quot;</span><span class="token punctuation">;</span>
  <span class="token comment">// query요청을 보내는 api는 query()이다.</span>
  con<span class="token punctuation">.</span><span class="token function">query</span><span class="token punctuation">(</span>sql1<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token keyword">throw</span> err<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;result : &quot;</span><span class="token punctuation">,</span> results<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> results<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/Learning-things/assets/img/multi.eb7f2a22.png" alt="multi"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Learning-things/node.js/expressJS.html" class="prev">
        Express
      </a></span> <span class="next"><a href="/Learning-things/node.js/npm.html">
        npm
      </a>
      →
    </span></p></div> <div></div></main></div> <footer class="siteFooter">
    © Devlog from jeong
  </footer></div><div class="global-ui"></div></div>
    <script src="/Learning-things/assets/js/app.34845478.js" defer></script><script src="/Learning-things/assets/js/15.fe10506d.js" defer></script>
  </body>
</html>
